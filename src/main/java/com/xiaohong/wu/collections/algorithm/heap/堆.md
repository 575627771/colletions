## 堆和堆排序

- 定义
    - 堆是一个完全二叉树；
    - 堆中每一个节点的值都大于等于（或小于等于）其子树中每一个节点的值；
    
     - 使用数组来存储堆非常节省内存
     - 大于子树的称为大顶堆，小于子树的称为小顶堆
    
- 操作
    - 插入
        - 堆化
            1. 从下向上
            2. 从上往下
            
    - 删除
        
        如果是使用正常的逻辑，先删除元素再退化，可能会导致数组空洞，因此再删除的时候，把最后一个元素放在删除元素的位置再进行堆化
        
    - 排序
       - 建堆
          
          原地建堆有两种思路：
          1. 借助插入，组织成堆
          2. 从上往下，这种堆化方式由于是往下比较，因此所有的叶子节点都不需要比较，直接跳过；
          
       - 排序
          
          建堆结束后数组已经是按照大顶堆来构建，最大的元素就是堆顶，因此可以把堆顶元素和最后一个元素交换，然后剩下的元素进行堆化，重复这个步骤，最终得到排序的数组，排序完成；
     - 实际开发中为什么使用快速排序比较多？
        1. 快速排序是顺序访问，而堆是跳序访问，堆CPU缓存不友好
        2. 同样的数据，堆排序的数据交换次数要比快速排序多
        
### 堆的应用
   1. 优先级队列
      1. 合并有序小文件 100个有序小文件
      2. 高性能定时器
   2. 利用堆求Top K
      
   3. 利用堆求中位数 
   
   
   
   
   
   
   
   
   
   
   
   
   
   
   
   
   
   
   
   
   
   
   
   
   
   
   
   
   
   