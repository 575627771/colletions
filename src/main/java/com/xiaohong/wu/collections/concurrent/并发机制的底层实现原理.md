#并发机制
## volatile的应用及原理

首先volatile是轻量级的synchronized，在多线程开发中保证共享变量的‘可见性’。

如果使用得当，比synchronized的使用成本更低，因为它不会引起上下文的切换和调度。

在有volatile修饰的共享变量进行写操作时会多出lock前缀的汇编代码，并引发：

①将当前处理器缓存行的数据写会到系统内存；

②这个写回内存的操作会使在其他cpu里缓存了该内存地址的数据无效；

为了提高处理速度，处理器不会直接和系统内存通信，而是将系统内存的数据先放到cpu缓存中，然后再进行操作；

## synchronized的实现原理

1.6之前被称为重量级锁，再1.6对其进行了优化。引入了偏向锁和轻量级锁以及锁的存储结构和升级过程。

synchronized实现同步的基础：Java中所有的对象都可以作为锁；具体表现为：

普通同步方法，锁是当前实例对象

静态同步方法，锁是当前类的Class对象

同步方法块，锁是synchronized括号里配置的对象